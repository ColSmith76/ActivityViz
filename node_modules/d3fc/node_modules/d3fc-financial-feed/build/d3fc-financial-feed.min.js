!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-request")):"function"==typeof define&&define.amd?define(["exports","d3-request"],t):t(n.fc_financial_feed=n.fc_financial_feed||{},n.d3_request)}(this,function(n,t){"use strict";function e(){var n="BTC-USD",e=null,u=null,r=null,o=function(o){var a=[];null!=e&&a.push("start="+e.toISOString()),null!=u&&a.push("end="+u.toISOString()),null!=r&&a.push("granularity="+r);var l="https://api.exchange.coinbase.com/products/"+n+"/candles?"+a.join("&");t.json(l,function(n,t){return n?void o(n):(t=t.map(function(n){return{date:new Date(1e3*n[0]),open:n[3],high:n[2],low:n[1],close:n[4],volume:n[5]}}),void o(n,t))})};return o.product=function(t){return arguments.length?(n=t,o):n},o.start=function(n){return arguments.length?(e=n,o):e},o.end=function(n){return arguments.length?(u=n,o):u},o.granularity=function(n){return arguments.length?(r=n,o):r},o}function u(){function n(n){return n[0].toLowerCase()+n.substr(1)}var e="YAHOO",u="GOOG",r=null,o=null,a=null,l=null,i=!1,c=null,s=n,f=function(n){var f=[];null!=r&&f.push("api_key="+r),null!=o&&f.push("start_date="+o.toISOString().substring(0,10)),null!=a&&f.push("end_date="+a.toISOString().substring(0,10)),null!=l&&f.push("rows="+l),i||f.push("order=asc"),null!=c&&f.push("collapse="+c);var d="https://www.quandl.com/api/v3/datasets/"+e+"/"+u+"/data.json?"+f.join("&");t.json(d,function(t,e){if(t)return void n(t);var u=e.dataset_data,r=s||function(n){return n},o=u.column_names.map(function(n,t){return[t,r(n)]}).filter(function(n){return n[1]}),a=u.data.map(function(n){var t={};return o.forEach(function(e){t[e[1]]=0===e[0]?new Date(n[e[0]]):n[e[0]]}),t});n(t,a)})};return f.database=function(n){return arguments.length?(e=n,f):e},f.dataset=function(n){return arguments.length?(u=n,f):u},f.apiKey=function(n){return arguments.length?(r=n,f):r},f.start=function(n){return arguments.length?(o=n,f):o},f.end=function(n){return arguments.length?(a=n,f):a},f.rows=function(n){return arguments.length?(l=n,f):l},f.descending=function(n){return arguments.length?(i=n,f):i},f.collapse=function(n){return arguments.length?(c=n,f):c},f.columnNameMap=function(n){return arguments.length?(s=n,f):s},f.defaultColumnNameMap=n,f}n.coinbase=e,n.quandl=u});