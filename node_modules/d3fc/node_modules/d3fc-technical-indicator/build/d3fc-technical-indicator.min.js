!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-array"),require("d3fc-rebind")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3fc-rebind"],r):r(n.fc_technical_indicator=n.fc_technical_indicator||{},n.d3_array,n.fc_rebind)}(this,function(n,r,e){"use strict";function t(n){return n}function u(n){}function i(n){return"function"==typeof n?n:function(){return n}}function o(n){return"number"==typeof n&&isNaN(n)?void 0:n}function l(){var n=function(){return 10},r=u,e=t,o=function(n){return null!=n},l=function(t){var u=n.apply(this,arguments),i=t.slice(0,u).map(e);return t.map(function(n,t){return t>=u&&(i.shift(),i.push(e(n,t))),t<u-1||i.some(function(n){return!o(n)})?r(void 0,t):r(i,t)})};return l.period=function(){return arguments.length?(n=i(arguments.length<=0?void 0:arguments[0]),l):n},l.accumulator=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.defined=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l.value=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l}function c(){var n=2,t=l().accumulator(function(e){var t=e&&r.deviation(e),u=e&&r.mean(e);return{average:u,upper:o(u+n*t),lower:o(u-n*t)}}),u=function(n){return t(n)};return u.multiplier=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],u):n},e.rebind(u,t,"period","value"),u}function a(){var n=t,e=function(){return 9},u=function(n){var e=[];return function(t){var u=void 0;return e.length<n&&(null!=t?e.push(t):e=[]),e.length>=n&&(u=r.mean(e)),u}},l=function(r){var t=e.apply(this,arguments),i=2/(t+1),l=u(t),c=void 0;return r.map(function(r,e){var t=n(r,e);return c=void 0===c?l(t):t*i+(1-i)*c,o(c)})};return l.period=function(){return arguments.length?(e=i(arguments.length<=0?void 0:arguments[0]),l):e},l.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l}function f(){var n=t,u=a().period(12),i=a().period(26),o=a().period(9),l=function(e){u.value(n),i.value(n);var t=r.zip(u(e),i(e)).map(function(n){return void 0!==n[0]&&void 0!==n[1]?n[0]-n[1]:void 0}),l=o(t);return r.zip(t,l).map(function(n){return{macd:n[0],signal:n[1],divergence:void 0!==n[0]&&void 0!==n[1]?n[0]-n[1]:void 0}})};return l.value=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},e.rebindAll(l,u,e.includeMap({period:"fastPeriod"})),e.rebindAll(l,i,e.includeMap({period:"slowPeriod"})),e.rebindAll(l,o,e.includeMap({period:"signalPeriod"})),l}function d(){var n=l().period(14),t=function(n,r){return r+(n[n.length-1]-r)/n.length},u=function(n){var r=s(n,2),e=r[0],t=r[1];return e<t?0:e-t},i=function(n){var r=s(n,2),e=r[0],t=r[1];return e>t?0:t-e},c=function(n,e){return void 0!==e?t(n,e):r.mean(n)},a=function(){var n=void 0,e=void 0,t=void 0;return function(l){if(!l)return void(void 0!==n&&(n=NaN));if(void 0===n)return void(n=l[0]);var a=r.pairs([n].concat(y(l)));e=c(a.map(u),e),t=c(a.map(i),t);var f=isNaN(n)?NaN:t/e;return o(100-100/(1+f))}},f=function(r){var e=a();return n.accumulator(e),n(r)};return e.rebind(f,n,"period","value"),f}function v(){var n=l().accumulator(function(n){return n&&r.mean(n)}),t=function(r){return n(r)};return e.rebind(t,n,"period","value"),t}function h(){var n=function(n,r){return n.close},t=function(n,r){return n.high},u=function(n,r){return n.low},i=l().period(5).defined(function(r){return null!=n(r)&&null!=t(r)&&null!=u(r)}).accumulator(function(e){var i=e&&r.max(e,t),l=e&&r.min(e,u),c=e&&100*(n(e[e.length-1])-l)/(i-l);return o(c)}),c=v().period(3),a=function(n){var r=i(n),e=c(r);return r.map(function(n,r){return{k:n,d:e[r]}})};return a.closeValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.highValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.lowValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],a):u},e.rebindAll(a,i,e.includeMap({period:"kPeriod"})),e.rebindAll(a,c,e.includeMap({period:"dPeriod"})),a}function p(){var n=function(n,r){return n.volume},r=function(n,r){return n.close},t=a().period(13),u=l().period(2).defined(function(e){return null!=r(e)&&null!=n(e)}).accumulator(function(e){return e&&o((r(e[1])-r(e[0]))*n(e[1]))}),i=function(n){var r=u(n);return t(r)};return i.volumeValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.closeValue=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},e.rebind(i,t,"period"),i}function g(){var n=.1,r=t,e=function(e){return e.map(function(e){var t=o(r(e)*(1-n)),u=o(r(e)*(1+n));return{lower:t,upper:u}})};return e.factor=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],e):n},e.value=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],e):r},e}function m(){var n=function(n,r){return n.close},t=function(n,r){return n.high},u=function(n,r){return n.low},i=a().period(13),l=function(e){return i.value(n),r.zip(e,i(e)).map(function(n){var r=o(t(n[0])-n[1]),e=o(u(n[0])-n[1]);return{bullPower:r,bearPower:e}})};return l.closeValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],l):n},l.highValue=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.lowValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],l):u},e.rebind(l,i,"period"),l}var s=function(){function n(n,r){var e=[],t=!0,u=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(t=(o=l.next()).done)&&(e.push(o.value),!r||e.length!==r);t=!0);}catch(c){u=!0,i=c}finally{try{!t&&l["return"]&&l["return"]()}finally{if(u)throw i}}return e}return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return n(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(n){if(Array.isArray(n)){for(var r=0,e=Array(n.length);r<n.length;r++)e[r]=n[r];return e}return Array.from(n)};n.bollingerBands=c,n.exponentialMovingAverage=a,n.macd=f,n.relativeStrengthIndex=d,n.stochasticOscillator=h,n.forceIndex=p,n.envelope=g,n.elderRay=m,n.movingAverage=v});