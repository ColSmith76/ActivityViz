!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-array"),require("d3fc-rebind")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3fc-rebind"],e):e(n.fc_sample=n.fc_sample||{},n.d3_array,n.fc_rebind)}(this,function(n,e,t){"use strict";function r(){var n=10,t=function(t){return e.range(0,Math.ceil(t.length/n)).map(function(e){return t.slice(e*n,(e+1)*n)})};return t.bucketSize=function(e){return arguments.length?(n=e,t):n},t}function u(){function n(n){var t=n.map(function(n){return[i(n),c(n)]}),r=e.range(1,t.length-1).map(function(n){var e=t[n-1],r=t[n],u=t[n+1],i=(e[0]-u[0])*(r[1]-e[1]),c=(e[0]-r[0])*(u[1]-e[1]);return Math.abs(.5*i*c)});return r}var u=r(),i=function(n){return n},c=function(n){return n},a=function(t){if(u.bucketSize()>=t.length)return t;var r=n(t),i=u(r),c=u(t.slice(1,t.length-1)),a=c.map(function(n,t){var r=i[t],u=e.max(r),c=r.indexOf(u);return n[c]});return[].concat(t[0],a,t[t.length-1])};return t.rebind(a,u,"bucketSize"),a.x=function(n){return arguments.length?(i=n,a):i},a.y=function(n){return arguments.length?(c=n,a):c},a}function i(){var n=function(n){return n},u=function(n){return n},i=r(),c=function(t){if(i.bucketSize()>=t.length)return t;var r=i(t.slice(1,t.length-1)),c=t[0],a=t[t.length-1],f=[].concat(c,r,a),o=n(c),l=u(c),d=r.map(function(t,r){var i=e.mean(f[r+1],n),c=e.mean(f[r+1],u),a=t.map(function(e){return[n(e),u(e)]}),d=a.map(function(n){var e=(o-i)*(n[1]-l),t=(o-n[0])*(c-l);return Math.abs(.5*e*t)}),h=d.indexOf(e.max(d)),g=a[h];return o=g[0],l=g[1],t[h]});return[].concat(t[0],d,t[t.length-1])};return t.rebind(c,i,"bucketSize"),c.x=function(e){return arguments.length?(n=e,c):n},c.y=function(n){return arguments.length?(u=n,c):u},c}function c(){var n=r(),u=function(n){return n},i=function(t){if(n.bucketSize()>t.length)return t;var r=e.extent(t,u),i=n(t.slice(1,t.length-1)),c=i.map(function(n,e){var t,i,c={},a=!0,f=n.map(u),o=f.filter(function(n){return n===r[0]||n===r[1]}).map(function(n){return f.indexOf(n)})[0];return void 0!==o?n[o]:(f.forEach(function(n,e){void 0===c[n]&&(c[n]=0),c[n]++,c[n]>c[t]||void 0===t?(t=n,i=e,a=!0):c[n]===c[t]&&(a=!1)}),a?n[i]:n[Math.floor(n.length/2)])});return[].concat(t[0],c,t[t.length-1])};return t.rebind(i,n,"bucketSize"),i.value=function(n){return arguments.length?(u=n,i):u},i}n.bucket=r,n.largestTriangleOneBucket=u,n.largestTriangleThreeBucket=i,n.modeMedian=c});